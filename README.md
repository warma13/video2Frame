# 视频帧提取工具

一个用于从视频中提取帧的Web工具，支持多种提取方式、去水印、去背景色等功能。

## 功能特性

- 📹 支持多种视频格式上传（MP4、WebM、Ogg等）
- ⏱️ 多种帧提取方式：
  - 按时间间隔提取
  - 指定时间点提取
  - 提取指定数量的帧
  - 首尾帧检测
- ✨ 高级功能：
  - 去水印功能
  - 去背景色功能
  - 自定义水印区域
  - 多种水印预设位置
- 🎨 保存选项：
  - 支持PNG和JPEG格式
  - 打包下载所有帧为ZIP文件
- 📱 响应式设计，适配不同屏幕尺寸

## 快速开始

1. 克隆或下载本项目到本地
2. 打开 `index.html` 文件在浏览器中运行
3. 上传视频文件
4. 选择提取方式和相关设置
5. 点击"提取"按钮开始提取帧
6. 提取完成后，可以查看提取的帧，点击"打包下载"按钮下载所有帧

## 算法参数解释

### 提取方式参数

#### 按时间间隔
- **时间间隔（秒）**：每帧之间的时间间隔，默认值为1秒

#### 指定时间点
- **指定时间点**：用逗号分隔的时间点列表，例如：1,3,5,10

#### 提取指定数量
- **提取总帧数**：要提取的帧的总数，默认值为4

#### 首尾帧检测
- **检测开始时间（秒）**：开始检测的时间点，默认值为1秒
- **首帧时间点（秒）**：首帧的时间点，默认值为0
- **检测步长（秒）**：检测的时间步长，默认值为0.2秒
- **相似度阈值**：判断帧是否相似的阈值，默认值为20，值越大，识别的相似帧越多
- **最大检测时间（秒）**：最大的检测时间，默认值为60秒

### 去水印参数

- **水印区域**：
  - **X**：水印区域左上角的X坐标（相对值，范围0-1）
  - **Y**：水印区域左上角的Y坐标（相对值，范围0-1）
  - **W**：水印区域的宽度（相对值，范围0-1）
  - **H**：水印区域的高度（相对值，范围0-1）
- **水印预设位置**：
  - 自定义：用户手动设置水印区域
  - 豆包：豆包视频水印位置
  - 左上角：视频左上角
  - 右上角：视频右上角
  - 左下角：视频左下角
  - 右下角：视频右下角

### 去背景色参数

- **颜色容差**：颜色容差越大，识别的背景色范围越广，默认值为20
- **穿透边缘去色**：根据颜色距离计算透明度，使边缘过渡更自然，默认选中
- **连续去色**：只去除与边缘连续的背景色，适合背景色单一且位于边缘的场景，默认选中
- **背景色选择**：手动选择要去除的背景色，默认值为白色

### 其他参数

- **每帧播放时长（秒）**：预览时每帧的播放时长，默认值为0.5秒
- **保存格式**：保存帧的格式，支持PNG和JPEG，默认值为PNG
- **使用原图比例**：保存时使用原始视频帧的比例，默认不选中

## 算法原理

### 首尾帧检测算法

1. 从指定的开始时间点开始，按照检测步长逐帧检测
2. 计算当前帧与前一帧的相似度
3. 当相似度低于阈值时，认为是一个场景切换点
4. 继续检测，直到找到另一个场景切换点或达到最大检测时间
5. 提取场景切换点之间的帧作为首尾帧

### 去水印算法

1. 根据用户指定的水印区域或预设位置确定水印位置
2. 在提取帧时，对水印区域进行模糊处理或替换
3. 保存处理后的帧

### 去背景色算法

1. 根据用户选择的背景色或点击第一帧预览获取背景色
2. 对提取的帧进行处理，去除与背景色相似的像素
3. 如果选择了"穿透边缘去色"，则根据颜色距离计算透明度，使边缘过渡更自然
4. 如果选择了"连续去色"，则只去除与边缘连续的背景色
5. 保存处理后的帧

## 项目结构

```
├── index.html          # 主页面
├── styles.css          # 样式文件
├── script.js           # 主脚本文件
└── README.md           # 项目说明文件
```

## 技术栈

- HTML5
- CSS3
- JavaScript
- [JSZip](https://github.com/Stuk/jszip) - 用于打包下载功能
- [FileSaver.js](https://github.com/eligrey/FileSaver.js) - 用于文件保存功能

## 浏览器支持

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 开源许可证

本项目采用 MIT 许可证开源。详见 [LICENSE](LICENSE) 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 致谢

- [JSZip](https://github.com/Stuk/jszip) - 提供ZIP打包功能
- [FileSaver.js](https://github.com/eligrey/FileSaver.js) - 提供文件保存功能

## 联系方式

如果您有任何问题或建议，欢迎联系项目维护者。

---

**享受提取视频帧的乐趣！** 🎬